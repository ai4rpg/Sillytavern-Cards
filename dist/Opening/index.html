<head><script type="module">var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var l in i)e.o(i,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:i[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=Vue,i=_;var l=e.n(i);const a={class:'character-creation-container'},o={class:'hud-block'},s={class:'selection-grid',id:'group-livelihood'},n=['onClick'],r={class:'option-title'},c={class:'option-description'},d={class:'hud-block'},u={class:'selection-grid',id:'group-god'},p=['onClick'],v={class:'option-title'},m={class:'option-description'},g={class:'hud-block'},E={class:'selection-grid',id:'group-district'},h=['onClick'],V={class:'option-title'},k={class:'option-description'},N={class:'hud-block'},y={class:'selection-grid',id:'group-resistance'},b=['onClick'],f={class:'option-title'},C={class:'option-description'},S={class:'confirm-button-container'},w=['disabled'],D=(0,t.defineComponent)({__name:'app',setup(e){const i=(0,t.reactive)({livelihood:'',god:'',district:'',resistance:''}),D=(0,t.ref)('这就是我了'),B=[{value:'侦探',title:'侦探',description:'失去了特殊能力的侦探，又获得了新的能力'},{value:'医生',title:'医生',description:'作为精神科医生，与青梅竹马过着平静而幸福的日子'},{value:'学生',title:'学生',description:'不仅仅是高中生，也是提尼的守护者'},{value:'潜藏者',title:'潜藏者',description:'心口的烙印还在发烫，你知道自己被魔女盯上了…'},{value:'画家',title:'画家',description:'凡间如幻梦，春秋如朝露，你还在捕捉着时光的影子'},{value:'上班族',title:'上班族',description:'你得乘着地铁去上班，也得乘着地铁去拯救世界'},{value:'修习术法者',title:'修习术法者',description:'炼丹画符，避世清修，在特异点降临后，你发现它们与咒术同出一脉'},{value:'魔修',title:'魔修',description:'血炼池中蛰伏近千载，凡尘俗世本已于你无干'},{value:'迷雾之人',title:'迷雾之人',description:'你的过往完全由自己定义…'}],M=[{value:'猫的庇护',title:'猫的庇护',description:'战争与领域之神'},{value:'面庞的庇护',title:'面庞的庇护',description:'野心与灵魂之神'},{value:'隐者的庇护',title:'隐者的庇护',description:'海与深渊之神'}],F=[{value:'朝阳区',title:'朝阳区',description:'现代社会，由特异点带来的尖端科技与改造技术被掌握在少数人手中'},{value:'回廊区',title:'回廊区',description:'被特异点摧毁过的城区，又被巫术与仪式重建'},{value:'平云区',title:'平云区',description:'被特异点摧毁过的城区，被仙人与武者们修缮'}],j=[{value:'丧失性欲',title:'丧失性欲',description:'你的身体连动情都做不到，当之无愧的色情侦探'},{value:'感觉遮蔽',title:'“感觉遮蔽”',description:'你的精神完全屏蔽了性欲，无法享受快感，但肉体受到刺激的表现正常'},{value:'你只是很镇定',title:'你只是很镇定',description:'你的精神韧性远高于其他人，但有着和正常人无二的性欲'}],A='stat_data.user.sex_statue.lust_resistance[0]',L='stat_data.user.special_abilities[0]',O='stat_data.user.profile.past_identity[0]',x='stat_data.user.profile.bless_old_gods[0]',P='stat_data.user.profile.home[0]',U='stat_data.latent_variables.ejs_index.phase_changed[0]',H='stat_data.latent_variables.opening_options_db',I=(0,t.computed)(()=>Object.values(i).every(e=>null!==e));function T(e,t){i[e]=t}async function q(){D.value='正在生成...';try{if('undefined'==typeof Mvu||'function'!=typeof triggerSlash)throw new Error('无法访问酒馆助手核心API(triggerSlash)或MVU脚本。请确保酒馆助手 (Tavern Helper) 已安装并正确加载MVU。');const e=Mvu.getMvuData({type:'message',message_id:0});if(!e||!e.stat_data)return void console.warn('未在聊天变量中找到 stat_data。跳过自动化处理。');const t=l().get(e,H),a=[],o=i.livelihood,s=i.god,n=i.district,r=i.resistance;if(!t.resistance[r])return void console.warn('对应 色情侦探的素质 选项缺失。');if(a.push(t.resistance[r]),!t.livelihood[o])return void console.warn('对应 过往 选项缺失。');{const e=t.livelihood[o];Array.isArray(e)?a.push(...e):a.push(e)}l().set(e,O,o),l().set(e,x,s),l().set(e,P,n),l().set(e,A,r),l().update(e,L,(e=[])=>[...e,...a]),l().set(e,U,0),await Mvu.replaceMvuData(e,{type:'message',message_id:'latest'});const c=await generate({user_input:''});await triggerSlash(`/addswipe switch=true ${c}`)}catch(e){console.error('角色创建失败:',e),D.value='错误！请检查控制台',alert(`角色创建失败！\n\n错误详情: ${e.message}\n\n请检查浏览器控制台(F12)获取更多信息。`)}}return(e,l)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',a,[l[4]||(l[4]=(0,t.createElementVNode)('div',{class:'hud-block'},[(0,t.createElementVNode)('h1',{class:'main-title'},'镜中面容'),(0,t.createElementVNode)('div',{class:'intro-text'},[(0,t.createElementVNode)('p',null,' 你被古神们选中，成为能够完全免疫色情化特异点的侦探，已经有一阵子了，提尼，这个繁荣而衰败的城市总是有着数不清的麻烦，色情案件滋生在城市的每个角落，而你的任务就是纠正它们，在行动力用尽前让案件失控值归零，否则，那特异点将会入侵现实，以平然化的方式侵入人们的日常生活。 '),(0,t.createElementVNode)('h2',null,'新的案件开始了……'),(0,t.createElementVNode)('p',null,'等等，但你还没有收拾妥当，不是吗？先仔细想想，你究竟是谁……')])],-1)),(0,t.createElementVNode)('div',o,[l[0]||(l[0]=(0,t.createElementVNode)('h3',{class:'hud-block-title'},'你的过往',-1)),(0,t.createElementVNode)('div',s,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(B,e=>(0,t.createElementVNode)('div',{key:e.value,class:(0,t.normalizeClass)(['option-card',{selected:i.livelihood===e.value}]),onClick:t=>T('livelihood',e.value)},[(0,t.createElementVNode)('div',r,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',c,(0,t.toDisplayString)(e.description),1)],10,n)),64))])]),(0,t.createElementVNode)('div',d,[l[1]||(l[1]=(0,t.createElementVNode)('h3',{class:'hud-block-title'},'你被哪位古神宠爱',-1)),(0,t.createElementVNode)('div',u,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(M,e=>(0,t.createElementVNode)('div',{key:e.value,class:(0,t.normalizeClass)(['option-card',{selected:i.god===e.value}]),onClick:t=>T('god',e.value)},[(0,t.createElementVNode)('div',v,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',m,(0,t.toDisplayString)(e.description),1)],10,p)),64))])]),(0,t.createElementVNode)('div',g,[l[2]||(l[2]=(0,t.createElementVNode)('h3',{class:'hud-block-title'},'你肉体的栖身之所',-1)),(0,t.createElementVNode)('div',E,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(F,e=>(0,t.createElementVNode)('div',{key:e.value,class:(0,t.normalizeClass)(['option-card',{selected:i.district===e.value}]),onClick:t=>T('district',e.value)},[(0,t.createElementVNode)('div',V,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',k,(0,t.toDisplayString)(e.description),1)],10,h)),64))])]),(0,t.createElementVNode)('div',N,[l[3]||(l[3]=(0,t.createElementVNode)('h3',{class:'hud-block-title'},'你作为色情侦探的必备素质',-1)),(0,t.createElementVNode)('div',y,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(j,e=>(0,t.createElementVNode)('div',{key:e.value,class:(0,t.normalizeClass)(['option-card',{selected:i.resistance===e.value}]),onClick:t=>T('resistance',e.value)},[(0,t.createElementVNode)('div',f,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',C,(0,t.toDisplayString)(e.description),1)],10,b)),64))])]),(0,t.createElementVNode)('div',S,[(0,t.createElementVNode)('button',{class:'confirm-button',disabled:!I.value,onClick:q},(0,t.toDisplayString)(D.value),9,w)])]))}});$(()=>{(0,t.createApp)(D).mount('#app')});
//# sourceMappingURL=index.js.map</script><style>@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;500;700&family=Orbitron:wght@400;700&display=swap);
/*! tailwindcss v4.1.16 | MIT License | https://tailwindcss.com */:root{--erotic-pink:#ff0077;--pink-glow:0 0 8px rgba(255,0,119,0.5);--detective-cyan:#00ffff;--cyan-glow:0 0 8px rgba(0,255,255,0.5);--bg-dark:#10001a;--bg-panel:#2a0a3a;--border-color:rgba(255,0,119,0.3);--text-light:#f5f5f5;--text-dim:#b0a0c0;--font-main:"Noto Sans SC",sans-serif;--font-hud:"Orbitron",sans-serif}body{background-color:var(--bg-panel);color:var(--text-light);font-family:var(--font-main);display:flex;justify-content:center;align-items:center;min-height:100vh;padding:15px;margin:0;box-sizing:border-box}.character-creation-container{background:rgba(0,0,0,0);border:none;border-radius:8px;padding:20px;max-width:900px;width:100%;box-shadow:0 0 20px rgba(255,0,119,.2),0 4px 30px rgba(0,0,0,.5);position:relative;overflow:hidden;clip-path:polygon(0 10px,10px 0,calc(100% - 10px) 0,100% 10px,100% calc(100% - 10px),calc(100% - 10px) 100%,10px 100%,0 calc(100% - 10px))}.character-creation-container::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-size:30px 30px;opacity:.3;pointer-events:none}.main-title{font-family:var(--font-hud);color:var(--erotic-pink);text-shadow:var(--pink-glow);text-align:center;font-size:2.2em;margin-top:0;margin-bottom:15px}.intro-text{color:var(--text-dim);text-align:center;font-size:.95em}.intro-text h2{font-family:var(--font-main);font-weight:500;font-size:1.1em;margin-top:20px;color:var(--erotic-pink);text-shadow:var(--pink-glow)}.selection-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}.hud-block{background:rgba(0,0,0,.3);border:1px solid rgba(0,255,255,.2);padding:15px;border-radius:5px;margin-bottom:20px}.hud-block-title{font-family:var(--font-hud);color:var(--detective-cyan);font-size:1rem;margin-top:0;margin-bottom:15px;text-transform:uppercase;letter-spacing:1.5px;border-bottom:1px dashed rgba(0,255,255,.4);padding-bottom:8px}.option-card{background:rgba(0,0,0,.2);border:1px solid rgba(0,255,255,.3);padding:15px;border-radius:4px;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column}.option-card:hover{border-color:var(--detective-cyan);background:rgba(0,255,255,.05)}.option-card.selected{border-color:var(--erotic-pink);background:rgba(255,0,119,.1);box-shadow:var(--pink-glow)}.option-title{font-weight:700;color:var(--text-light);margin-bottom:8px;font-size:1em}.option-description{font-size:.9em;color:var(--text-dim);line-height:1.5;flex-grow:1}.confirm-button-container{text-align:center;margin-top:25px}.confirm-button{font-family:var(--font-hud);background:rgba(0,0,0,0);border:2px solid var(--erotic-pink);color:var(--erotic-pink);padding:12px 35px;font-size:1.1em;cursor:pointer;border-radius:4px;transition:all .3s ease;text-shadow:var(--pink-glow);width:100%;max-width:300px}.confirm-button:hover:not(:disabled){background:var(--erotic-pink);color:var(--bg-dark);box-shadow:0 0 15px var(--erotic-pink)}.confirm-button:disabled{border-color:#555;color:#555;cursor:not-allowed;text-shadow:none}@media (max-width:768px){body{padding:10px;align-items:flex-start}.character-creation-container{padding:15px;clip-path:none;border-radius:8px}.main-title{font-size:1.8em}.intro-text p{font-size:.9em;line-height:1.6}.hud-block{padding:12px}.selection-grid{grid-template-columns:1fr;gap:12px}.option-card{padding:12px}.confirm-button-container{margin-top:20px}.confirm-button{padding:14px 20px;font-size:1em}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>