<head><script type="module">var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var a in i)e.o(i,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=Vue,i=_;var a=e.n(i);const s=JSON.parse('{"o":{"丧失性欲":{"ability_name":["丧失性欲","string: The name of the special ability."],"ability_quality":["传说","string: The quality of the special ability."],"is_passive":[true,"boolean: Whether the ability is a passive skill."],"ability_description":["在精神和肉体上均不会产生性兴奋与性冲动，完全豁免“色情化特异点”的影响，字面意义的在肉体和精神上都无懈可击。","string: A brief description of the ability\'s effect. If it\'s an active ability, describe its impact on the \'out_of_control\' value."],"is_used":[false,"boolean: Whether the ability has been used in the current case."]},"感觉遮蔽":{"ability_name":["感觉遮蔽","string: The name of the special ability."],"ability_quality":["普通","string: The quality of the special ability."],"is_passive":[true,"boolean: Whether the ability is a passive skill."],"ability_description":["肉体会对性行为产生诚实的反应，但精神却可以保持冷静，完全豁免“色情化特异点”的精神影响，外神无法从精神层面摧毁你。","string: A brief description of the ability\'s effect. If it\'s an active ability, describe its impact on the \'out_of_control\' value."],"is_used":[false,"boolean: Whether the ability has been used in the current case."]},"只是很镇定":{"ability_name":["精神壁垒","string: The name of the special ability."],"ability_quality":["普通","string: The quality of the special ability."],"is_passive":[true,"boolean: Whether the ability is a passive skill."],"ability_description":["获得了更高的精神韧性，不易因快感而迷失心智，可以稍微抵御“色情化特异点”的精神影响。","string: A brief description of the ability\'s effect. If it\'s an active ability, describe its impact on the \'out_of_control\' value."],"is_used":[false,"boolean: Whether the ability has been used in the current case."]}},"u":{"侦探":[{"ability_name":["悸动",""],"ability_quality":["普通",""],"is_passive":[false,""],"ability_description":["本回合的行动将不消耗行动力。你偶尔还能回想起曾经破案时美妙的感觉，这使你充满了决心。失控值-1。",""],"is_used":[false,""]},{"ability_name":["线索串联",""],"ability_quality":["普通",""],"is_passive":[false,""],"ability_description":["揭示一个案件弱点。少部分的直觉与大部分的逻辑推理。失控值-1。",""],"is_used":[false,""]}],"医生":{"ability_name":["精神分析",""],"ability_quality":["普通",""],"is_passive":[true,""],"ability_description":["可以通过话聊来更有效地减少失控值。色情化特异点本就是一种精神科疾病，加一点超自然要素。",""],"is_used":[false,""]},"学生":{"ability_name":["变身",""],"ability_quality":["史诗",""],"is_passive":[false,""],"ability_description":["变身成魔法少女，身体和精神都得到大幅强化，还能飞。守护人们的英雄，可不能败北啊！失控值+5。",""],"is_used":[false,""]},"潜藏者":{"ability_name":["烙印之人",""],"ability_quality":["普通",""],"is_passive":[true,""],"ability_description":["你更容易成为色情化特异点集中攻击的目标。你被占有欲很强的魔女盯上了！她什么时候会找到你?",""],"is_used":[false,""]},"画家":{"ability_name":["神之梦",""],"ability_quality":["传说",""],"is_passive":[true,""],"ability_description":["你能像捏橡皮泥一样改造现实。整个世界是你的一场梦境…吗？",""],"is_used":[false,""]},"上班族":{"ability_name":["现实稳定锚",""],"ability_quality":["史诗",""],"is_passive":[false,""],"ability_description":["强行稳定现实的锚点,在5分钟内让色情化特异点对现界的影响完全消失。这个世界还是无聊点好，失控值-8。",""],"is_used":[false,""]},"修习术法者":{"ability_name":["咒法自然",""],"ability_quality":["稀有",""],"is_passive":[true,""],"ability_description":["你精通画符炼丹之道，可引天雷地火，对妖物鬼怪特攻。直到很久后你才发现道法与咒术同出一脉。",""],"is_used":[false,""]},"魔修":{"ability_name":["血刻印",""],"ability_quality":["史诗",""],"is_passive":[true,""],"ability_description":["你曾是血道宗师，精通各种血道仙法，虽然因复生失去了绝大部分力量，但仍能使用些血道小术法。恐怕世上的正统魔修…或者说修道之人，只剩你一人了，这场与正道的战争，最终还是由你取得了最终的胜利。",""],"is_used":[false,""]},"迷雾之人":[]}}'),l='user.sex_statue.lust_resistance[0]',o='user.special_abilities[0]',n='user.profile.past_identity[0]',r='user.profile.bless_old_gods[0]',c='user.profile.home[0]',d='latent_variables.ejs_index.phase_changed[0]';const u={class:'character-creation-container'},p={class:'hud-block'},v={class:'selection-grid',id:'group-livelihood'},y=['onClick'],b={class:'option-title'},m={class:'option-description'},h={class:'hud-block'},f={class:'selection-grid',id:'group-god'},g=['onClick'],E={class:'option-title'},k={class:'option-description'},V={class:'hud-block'},N={class:'selection-grid',id:'group-district'},w=['onClick'],C={class:'option-title'},q={class:'option-description'},M={class:'hud-block'},S={class:'selection-grid',id:'group-resistance'},B=['onClick'],D={class:'option-title'},A={class:'option-description'},I={class:'confirm-button-container'},T=['disabled'],W=(0,t.defineComponent)({__name:'app',setup(e){const i=(0,t.reactive)({livelihood:'',god:'',district:'',resistance:''}),W=(0,t.ref)('这就是我了'),F=(0,t.ref)(!1),L=[{value:'侦探',title:'侦探',description:'失去了特殊能力的侦探，又获得了新的能力'},{value:'医生',title:'医生',description:'作为精神科医生，与青梅竹马过着平静而幸福的日子'},{value:'学生',title:'学生',description:'不仅仅是高中生，也是提尼的守护者'},{value:'潜藏者',title:'潜藏者',description:'心口的烙印还在发烫，你知道自己被魔女盯上了…'},{value:'画家',title:'画家',description:'凡间如幻梦，春秋如朝露，你还在捕捉着时光的影子'},{value:'上班族',title:'上班族',description:'你得乘着地铁去上班，也得乘着地铁去拯救世界'},{value:'修习术法者',title:'修习术法者',description:'炼丹画符，避世清修，在特异点降临后，你发现它们与咒术同出一脉'},{value:'魔修',title:'魔修',description:'血炼池中蛰伏近千载，凡尘俗世本已于你无干'},{value:'迷雾之人',title:'迷雾之人',description:'你的过往完全由自己定义…'}],O=[{value:'猫的庇护',title:'猫的庇护',description:'战争与领域之神'},{value:'面庞的庇护',title:'面庞的庇护',description:'野心与灵魂之神'},{value:'隐者的庇护',title:'隐者的庇护',description:'海与深渊之神'}],j=[{value:'朝阳区',title:'朝阳区',description:'现代社会，由特异点带来的尖端科技与改造技术被掌握在少数人手中'},{value:'回廊区',title:'回廊区',description:'被特异点摧毁过的城区，又被巫术与仪式重建'},{value:'平云区',title:'平云区',description:'被特异点摧毁过的城区，被仙人与武者们修缮'}],P=[{value:'丧失性欲',title:'丧失性欲',description:'你的身体连动情都做不到，当之无愧的色情侦探'},{value:'感觉遮蔽',title:'“感觉遮蔽”',description:'你的精神完全屏蔽了性欲，无法享受快感，但肉体受到刺激的表现正常'},{value:'只是很镇定',title:'只是很镇定',description:'你的精神韧性远高于其他人，但有着和正常人无二的性欲'}],x=(0,t.computed)(()=>Object.values(i).every(e=>''!==e));function H(e,t){i[e]=t}async function G(){F.value=!0,W.value='正在生成...';try{await async function(e){if('undefined'==typeof Mvu||'function'!=typeof generate||'function'!=typeof getChatMessages||'function'!=typeof setChatMessages||'function'!=typeof getLastMessageId||'function'!=typeof updateVariablesWith)throw new Error('无法访问酒馆助手核心API。请确保酒馆助手 (Tavern Helper) 已安装并正确加载。');await waitGlobalInitialized('Mvu');const t=Mvu.getMvuData({type:'message',message_id:0});if(!t||!t.stat_data)throw new Error('未在聊天变量中找到 stat_data。');const i=t.stat_data,u=[],{livelihood:p,god:v,district:y,resistance:b}=e,m=s.o[b];m&&u.push(m);const h=s.u[p];if(h){const e=Array.isArray(h)?h:[h];u.push(...e)}a().set(i,n,p),a().set(i,r,v),a().set(i,c,y),a().set(i,l,b),a().set(i,o,u),a().set(i,d,0),a().merge(t.stat_data,i),replaceVariables(t,{type:'message',message_id:0});const f=await generate({user_input:''}),g=getChatMessages(-1,{include_swipes:!0})[0],E=[...g.swipes,f+'\n\n<StatusPlaceHolderImpl/>'],k=await Mvu.parseMessage(f,t),V=[...g.swipes_data,k||t];await setChatMessages([{message_id:-1,swipes:E,swipes_data:V,swipe_id:g.swipes.length}])}(i)}catch(e){console.error('角色创建失败:',e),W.value='错误！请检查控制台',alert(`角色创建失败！ 错误详情: ${e.message} 请检查浏览器控制台(F12)获取更多信息。`)}finally{F.value=!1}}return(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',u,[a[4]||(a[4]=(0,t.createElementVNode)('div',{class:'hud-block'},[(0,t.createElementVNode)('h1',{class:'main-title'},'镜中面容'),(0,t.createElementVNode)('div',{class:'intro-text'},[(0,t.createElementVNode)('p',null,' 你被古神们选中，成为能够完全免疫色情化特异点的侦探，已经有一阵子了，提尼，这个繁荣而衰败的城市总是有着数不清的麻烦，色情案件滋生在城市的每个角落，而你的任务就是纠正它们，在行动力用尽前让案件失控值归零，否则，那特异点将会入侵现实，以平然化的方式侵入人们的日常生活。 '),(0,t.createElementVNode)('h2',null,'新的案件开始了……'),(0,t.createElementVNode)('p',null,'等等，但你还没有收拾妥当，不是吗？先仔细想想，你究竟是谁……')])],-1)),(0,t.createElementVNode)('div',p,[a[0]||(a[0]=(0,t.createElementVNode)('h3',{class:'hud-block-title'},'你的过往',-1)),(0,t.createElementVNode)('div',v,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(L,e=>(0,t.createElementVNode)('div',{key:e.value,class:(0,t.normalizeClass)(['option-card',{selected:i.livelihood===e.value}]),onClick:t=>H('livelihood',e.value)},[(0,t.createElementVNode)('div',b,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',m,(0,t.toDisplayString)(e.description),1)],10,y)),64))])]),(0,t.createElementVNode)('div',h,[a[1]||(a[1]=(0,t.createElementVNode)('h3',{class:'hud-block-title'},'你被哪位古神宠爱',-1)),(0,t.createElementVNode)('div',f,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(O,e=>(0,t.createElementVNode)('div',{key:e.value,class:(0,t.normalizeClass)(['option-card',{selected:i.god===e.value}]),onClick:t=>H('god',e.value)},[(0,t.createElementVNode)('div',E,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',k,(0,t.toDisplayString)(e.description),1)],10,g)),64))])]),(0,t.createElementVNode)('div',V,[a[2]||(a[2]=(0,t.createElementVNode)('h3',{class:'hud-block-title'},'你肉体的栖身之所',-1)),(0,t.createElementVNode)('div',N,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(j,e=>(0,t.createElementVNode)('div',{key:e.value,class:(0,t.normalizeClass)(['option-card',{selected:i.district===e.value}]),onClick:t=>H('district',e.value)},[(0,t.createElementVNode)('div',C,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',q,(0,t.toDisplayString)(e.description),1)],10,w)),64))])]),(0,t.createElementVNode)('div',M,[a[3]||(a[3]=(0,t.createElementVNode)('h3',{class:'hud-block-title'},'你作为色情侦探的必备素质',-1)),(0,t.createElementVNode)('div',S,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(P,e=>(0,t.createElementVNode)('div',{key:e.value,class:(0,t.normalizeClass)(['option-card',{selected:i.resistance===e.value}]),onClick:t=>H('resistance',e.value)},[(0,t.createElementVNode)('div',D,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',A,(0,t.toDisplayString)(e.description),1)],10,B)),64))])]),(0,t.createElementVNode)('div',I,[(0,t.createElementVNode)('button',{class:'confirm-button',disabled:!x.value||F.value,onClick:G},(0,t.toDisplayString)(W.value),9,T)])]))}});$(()=>{(0,t.createApp)(W).mount('#app')});
//# sourceMappingURL=index.js.map</script><style>@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;500;700&family=Orbitron:wght@400;700&display=swap);
/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */:root{--erotic-pink:#ff0077;--pink-glow:0 0 8px rgba(255,0,119,0.5);--detective-cyan:#00ffff;--cyan-glow:0 0 8px rgba(0,255,255,0.5);--bg-dark:#10001a;--bg-panel:#2a0a3a;--border-color:rgba(255,0,119,0.3);--text-light:#f5f5f5;--text-dim:#b0a0c0;--font-main:"Noto Sans SC",sans-serif;--font-hud:"Orbitron",sans-serif}body{background-color:var(--bg-dark);color:var(--text-light);font-family:var(--font-main);display:flex;justify-content:center;align-items:center;min-height:100vh;padding:15px;margin:0;box-sizing:border-box}.character-creation-container{background:rgba(0,0,0,0);border:none;border-radius:8px;padding:20px;max-width:900px;width:100%;box-shadow:0 0 20px rgba(255,0,119,.2),0 4px 30px rgba(0,0,0,.5);position:relative;overflow:hidden;clip-path:polygon(0 10px,10px 0,calc(100% - 10px) 0,100% 10px,100% calc(100% - 10px),calc(100% - 10px) 100%,10px 100%,0 calc(100% - 10px))}.character-creation-container::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-size:30px 30px;opacity:.3;pointer-events:none}.main-title{font-family:var(--font-hud);color:var(--erotic-pink);text-shadow:var(--pink-glow);text-align:center;font-size:2.2em;margin-top:0;margin-bottom:15px}.intro-text{color:var(--text-dim);text-align:center;font-size:.95em}.intro-text h2{font-family:var(--font-main);font-weight:500;font-size:1.1em;margin-top:20px;color:var(--erotic-pink);text-shadow:var(--pink-glow)}.selection-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}.hud-block{background:rgba(0,0,0,.3);border:1px solid rgba(0,255,255,.2);padding:15px;border-radius:5px;margin-bottom:20px}.hud-block-title{font-family:var(--font-hud);color:var(--detective-cyan);font-size:1rem;margin-top:0;margin-bottom:15px;text-transform:uppercase;letter-spacing:1.5px;border-bottom:1px dashed rgba(0,255,255,.4);padding-bottom:8px}.option-card{background:rgba(0,0,0,.2);border:1px solid rgba(0,255,255,.3);padding:15px;border-radius:4px;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column}.option-card:hover{border-color:var(--detective-cyan);background:rgba(0,255,255,.05)}.option-card.selected{border-color:var(--erotic-pink);background:rgba(255,0,119,.1);box-shadow:var(--pink-glow)}.option-title{font-weight:700;color:var(--text-light);margin-bottom:8px;font-size:1em}.option-description{font-size:.9em;color:var(--text-dim);line-height:1.5;flex-grow:1}.confirm-button-container{text-align:center;margin-top:25px}.confirm-button{font-family:var(--font-hud);background:rgba(0,0,0,0);border:2px solid var(--erotic-pink);color:var(--erotic-pink);padding:12px 35px;font-size:1.1em;cursor:pointer;border-radius:4px;transition:all .3s ease;text-shadow:var(--pink-glow);width:100%;max-width:300px}.confirm-button:hover:not(:disabled){background:var(--erotic-pink);color:var(--bg-dark);box-shadow:0 0 15px var(--erotic-pink)}.confirm-button:disabled{border-color:#555;color:#555;cursor:not-allowed;text-shadow:none}@media (max-width:768px){body{padding:10px;align-items:flex-start}.character-creation-container{padding:15px;clip-path:none;border-radius:8px}.main-title{font-size:1.8em}.intro-text p{font-size:.9em;line-height:1.6}.hud-block{padding:12px}.selection-grid{grid-template-columns:1fr;gap:12px}.option-card{padding:12px}.confirm-button-container{margin-top:20px}.confirm-button{padding:14px 20px;font-size:1em}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>